<head>
    <title>Iterated Prisoner's Dilemma</title>
</head>

<body>
    <h1>Iterated Prisoner's Dilemma</h1>

    <textarea id='userCode' style='width: 600px; height: 300px;'>function(enemyChoice, state) {
    // 'enemyChoice' returns the choice your enemy made in the round before
    //     this one. During the first round, this will be null.
    // 'state' returns the state you saved for later, last round. During the
    //     first round, this will be null.

    // In this example, I implement DefectBot. Maybe you want to do something
    // more complicated!

    // You should return:
    return {
        'choice': false,    // Your next move. true = cooperate, false = defect.
        'state': {},    // Whatever state you want to save for later.
    }

}</textarea>

    {{> testingStats}}

    <h2>Submission</h2>
    <form class='submission'>
        <input name='userId' placeholder='Your SPARC ID'><input name='name' placeholder='Your name'>
        <button type='submit'>Submit your program</button>
    </form>
    
    {{> results}}
</body>

<template name='testingStats'>
    <h2>Testing</h2>
    <button id='runTesting'>Run testing</button>
    
    <h3>vs. CooperateBot</h3>
    <p>{{cooperateBotStats}}</p>

    <h3>vs. DefectBot</h3>
    <p>{{defectBotStats}}</p>

    <h3>vs. yourself</h3>
    <p>{{yourselfBotStats}}</p>
</template>

<template name='results'>
    <h2>Leaderboard</h2>
    <button id='refresh'>Refresh the leaderboard</button>
    <p>Number of games in the queue: {{queueSize}}</p>
    <table border='1'>
    {{#each bots}}
        <tr>
            <td>{{userId}}</td>
            <td>{{name}}</td>
            <td>{{score}}</td>
        </tr>
    {{/each}}
    </table>
    
    <p><em>NB</em> A score of -1000000000 almost certainly means that your program either contains a syntax error or threw an exception during execution in one of the rounds.</p>
</template>
